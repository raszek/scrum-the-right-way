<div data-controller="editor-update"
     data-editor-update-url-value="{{ path('app_project_issue_update_description', {id: project.id, issueCode: issue.code}) }}"
     data-editor-update-issue-events-outlet="#issue-events"
     class="card mb-3"
>
    <div class="card-header d-flex justify-content-between align-items-center">
        <span>
            Description
            <small>
                (
                <a href="{{ path('app_issue_description_history_list', {id: project.id, issueCode: issue.code}) }}"
                   target="_blank"
                >
                    History
                </a>
                )
            </small>
        </span>
        {% if is_granted('UPDATE_ISSUE_DESCRIPTION', project) %}
            <div data-editor-update-target="editButtons" style="display: none;">
                <button data-action="editor-update#cancel" class="btn btn-primary me-3" title="Cancel"><i class="bi bi-x"></i></button>
                <button data-action="editor-update#save" class="btn btn-primary" title="Save"><i class="bi bi-save"></i></button>
            </div>
            <div data-editor-update-target="viewButtons">
                <button data-action="editor-update#edit" class="btn btn-primary" title="Edit"><i class="bi bi-pencil"></i></button>
            </div>
        {% endif %}
        
    </div>
    <div class="card-body">
        <div data-editor-update-target="viewer">
            {% if not issue.description %}
                Add more detailed description
            {% else %}
                {{ issue.description | nl2br }}
            {% endif %}
        </div>
        <div data-editor-update-target="editor">
        </div>
    </div>
</div>
